---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - README.md
  - src/asset_optimization/__init__.py
  - src/asset_optimization/exceptions.py
  - src/asset_optimization/schema.py
autonomous: true

must_haves:
  truths:
    - "Package is pip-installable in editable mode"
    - "Import `from asset_optimization import Portfolio` works"
    - "Custom exceptions exist for validation failures"
    - "Pandera schema defines required portfolio fields"
  artifacts:
    - path: "pyproject.toml"
      provides: "Package metadata and dependencies"
      contains: "asset-optimization"
    - path: "src/asset_optimization/__init__.py"
      provides: "Package entry point"
      exports: ["Portfolio", "ValidationError"]
    - path: "src/asset_optimization/exceptions.py"
      provides: "Custom exception hierarchy"
      exports: ["AssetOptimizationError", "ValidationError", "MissingFieldError", "DataQualityError"]
    - path: "src/asset_optimization/schema.py"
      provides: "Pandera schema for portfolio validation"
      exports: ["portfolio_schema"]
  key_links:
    - from: "src/asset_optimization/__init__.py"
      to: "src/asset_optimization/exceptions.py"
      via: "import"
      pattern: "from .exceptions import"
---

<objective>
Set up pip-installable Python package with custom exceptions and Pandera validation schema.

Purpose: Establish the foundation that all subsequent Phase 1 work builds on — package structure, dependency management, and validation primitives.

Output: Installable package with exceptions and schema ready for Portfolio class implementation.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package structure and pyproject.toml</name>
  <files>
    pyproject.toml
    README.md
    src/asset_optimization/__init__.py
  </files>
  <action>
Create the src layout Python package structure:

1. Create `pyproject.toml` with:
   - name: "asset-optimization"
   - version: "0.1.0"
   - requires-python: ">=3.10"
   - dependencies: pandas>=2.0.0, openpyxl>=3.1.0, pandera>=0.18.0
   - [project.optional-dependencies] dev: pytest>=7.1.0
   - [tool.setuptools.packages.find] where: ["src"]
   - [tool.pytest.ini_options] testpaths: ["tests"]

2. Create minimal `README.md` with package name and one-line description.

3. Create `src/asset_optimization/__init__.py` with:
   - `__version__ = "0.1.0"`
   - Placeholder imports (will be populated in Task 2)
   - `__all__` list for public API

Use the exact structure from RESEARCH.md "Minimal pyproject.toml for Pip Installation" section.
  </action>
  <verify>
Run: `pip install -e . && python -c "import asset_optimization; print(asset_optimization.__version__)"`
Expected: Prints "0.1.0" without errors.
  </verify>
  <done>Package installs via pip in editable mode and version is accessible.</done>
</task>

<task type="auto">
  <name>Task 2: Create exception hierarchy and Pandera schema</name>
  <files>
    src/asset_optimization/exceptions.py
    src/asset_optimization/schema.py
    src/asset_optimization/__init__.py
  </files>
  <action>
1. Create `src/asset_optimization/exceptions.py` with:
   - `AssetOptimizationError(Exception)` — base exception
   - `ValidationError(AssetOptimizationError)` — with field, message, details attributes
   - `MissingFieldError(ValidationError)` — for missing required columns
   - `DataQualityError(ValidationError)` — for quality threshold failures

   Use the pattern from RESEARCH.md "Pattern 3: Custom Exception Hierarchy".

2. Create `src/asset_optimization/schema.py` with:
   - Import pandera and define `portfolio_schema` using `DataFrameSchema`
   - Required columns (from CONTEXT.md):
     - asset_id: str, unique=True, nullable=False
     - install_date: pd.Timestamp, nullable=False, check <= now (not in future)
     - asset_type: str, nullable=False
     - material: str, nullable=False
   - Optional columns:
     - diameter_mm: Int64, nullable=True, check > 0
     - length_m: float, nullable=True, check > 0
     - condition_score: float, nullable=True, check in_range(0, 100)
   - Set strict=False (allow extra columns), coerce=True

   Use the pattern from RESEARCH.md "Pattern 4: Pandera Schema Validation".

3. Update `src/asset_optimization/__init__.py`:
   - Import and export: Portfolio (placeholder comment for now), ValidationError, MissingFieldError, DataQualityError
   - Update `__all__` list
  </action>
  <verify>
Run: `python -c "from asset_optimization import ValidationError; from asset_optimization.schema import portfolio_schema; print('OK')"`
Expected: Prints "OK" without errors.
  </verify>
  <done>Exception classes raise with structured details; Pandera schema validates required portfolio fields.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `pip install -e .` succeeds
2. `python -c "import asset_optimization"` works
3. `python -c "from asset_optimization import ValidationError"` works
4. `python -c "from asset_optimization.schema import portfolio_schema"` works
5. Schema validates a correct DataFrame and rejects one with missing asset_id
</verification>

<success_criteria>
- Package is installable via `pip install -e .`
- Import `asset_optimization` works
- Exception classes exist with proper inheritance
- Pandera schema exists with all required fields defined
- Schema validation rejects invalid data (missing required fields, future dates, duplicate IDs)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
